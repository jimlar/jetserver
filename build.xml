<?xml version="1.0"?>

<project name="JetServer" default="jetserver" basedir=".">

  <property name="build.compiler" value="jikes" />

  <property name="classpath" value="src:
				    .build/classes" />

  <!-- jetserver -->
  <target name="jetserver" depends="compile">
    <jar jarfile=".build/jetserver.jar" 
         basedir=".build/classes"
         manifest="src/MANIFEST.MF"/>
  </target>

  <!-- clean -->
  <target name="clean">
    <delete dir=".build" />
  </target>

  <!-- compile -->
  <target name="compile">
    <mkdir dir=".build/classes"/>

    <javac destdir=".build/classes"
	   classpath="${classpath}"
	   includes="**/*.java">
    
      <src path="src"/>
    </javac>

    <copy todir=".build">
      <fileset dir="." includes="lib/*.jar" />
      <fileset dir="." includes="config/*.xml,config/mime.types" />
      <fileset dir="." includes="html/*.html" />
    </copy>

  </target>

  <!-- start benchmarking -->
  <target name="benchmark" depends="compile">
    <java classname="jetserver.benchmark.BenchMark"
          classpath="${classpath}">
      <arg value="http://localhost/index.html" />
      <arg value="3" />
    </java>
  </target>

</project>
